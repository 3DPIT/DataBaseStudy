# 정규화

### 정규화 개요

```
정규화란?
잘못 설계된 관계형 스키마를 종속성 이론(함수적 종속성등)을 이용하여 더작은 세트로 쪼개어 바람직한 스키마로 만들어 가는 과정
```

하나의 종속성이 하나의 릴레이션에 표현 될수 있도록 분해해가는 과정

## 정규화의 종류

제1정규형, 제2정규형, 제3정규형, BCNF형, 제4정규형, 제5정규형

차수가 높아질수록 만족시켜야 할 제약 조건이 증가



정규화는 DB의 논리적 설계 단계에서 수행, 논리적 처리 및 춤직에 큰 영향 미침



## 정규화의 목적

1. 데이터 구조의 안정성 최대화
2. 어떠한 릴레이션이라도 DB내에 표현 가능하게 만듦
3. 효과적인 검색 알고리즘을 생성 할 수 있음
4. 중복을 배제하여 삽입, 삭제, 갱신 이상 발생 방지
5. 데이터 삽입시 릴레이션 재구성할 필요성 줄임



## Anomaly(이상)의 개념 및 종류

**이상 이란 ?**

정규화 하지 않으면 DB내에 데이터들이 불필요하게 중복되어 릴레이션 조작시 곤란한 현상 발생하는 것



## 이상의 종류

* 삽입 이상(Insertion Anomaly) 

  ```
  릴레이션에 데이터 삽입 시 의도와 상관없이 원하지 않는 값들도 함께 삽입되는 현상
  ```

* 삭제 이상

  ```
  릴레이션에서 한 튜플을 삭제할 때 의도와는 상관없는 값들도 함게 삭제되는 
  연쇄 삭제 현상
  ```

* 갱신 이상

  ```
  릴레이션에 튜플에 있는 속성값을 갱신할 때 일부 튜플의 정보만 갱신되어 정보에
  모순이 생긱는 현상
  ```

정규화는 이상을 제거하기 위해서 **중복성 **및 **종속성**을 배제 시키는 방법으로 사용



## 정규화의 원칙

1. **정보의 무손실 표현** 

   ```
   하나의 스키마를 다른 스키마로 변환할 때 정보의 손실이 있어서는 안됨
   ```

2. **분리의 원칙**

   ```
   하나의 독립된 관계성은 하나의 독립된 릴레이션으로 분리시켜 표현
   ```

3. **데이터의 중복성이 감소**



## 정규화의 과정

1.  1NF(제1정규형)

   릴레이션에 속한 모든 **도메인이 원자값(Atomic Value)**만으로 되어 있는 릴레이션

   (릴레이션의 모든 속성이 단순 영역에 정의)

   

2.  2NF(제2정규형)

   릴레이션 R이 1NF이고, 키가 아닌 모든 속성이 기본키에 대하여 **완전 함수적 종속** 관계를 만족

   

3.  3NF(제3정규형)

   릴레이션R이 2NF이고, 키가 아닌 모든 애트리뷰트가 기본키에 대하여 **이행적 종속 관계**를 이루지 않도록 제한한 관계형

   ( 무손실 조인 또는 종속성 보존을 저해하지 않고도 항상 3NF 설계를 얻을 수 있다)

   

4. BCNF(Boyce-codd 정규형)

   릴레이션R에서 **결정자가 모두 후보키인 관계형**

   3NF에서 후보키가 많고 서로 중첩되는 경우에 적용하는, 강한 제3정규형

   * 모든 BCNF(Boyce-Codd Normal Form)가 종속성을 보존하는것은 아님

     ```
     BCNF의 제약 조건
     * 키가 아닌 모든 속성은 각 키에 대하여 완전 종속
     * 키가 아닌 모든 속성은 그 자신이 부분적으로 들어가 있지 않은 모든 키에 대하여 완전 종속
     * 어떤 속성도 키가 아닌 속성에 대해서는 완전 종속할 수 없다
     ```

     

5.  4NF(제4정규형)

   릴레이션 R에 **다치종속 **A->->B 가 성립하는 경우 R의 모든 속성이 A에 함수적 종속

   일 때 

   ``` 
   다치 종속(MVD : Multi Valued Dependency)
   - A, B, C 세 개의 속성을 가진 릴레이션R에서 어떤 복합속성(A,C)에 대응하는 B값의 집합이 A 값에만 종속되고 C 값에는 무관할 때 다치종속 R.A ->->R.B 가 존재 
   ```

6.  5NF(제5정규형)

   릴레이션 R의 모든 **조인 종속성(JD)**의 만족이 R의 후보키를 통해서만 만족될 때 

   

**정리**

도메인이 원자값

부분적 함수 종속 제거

이행적 함수 종속 제거

결정자이면서 후보키가 아닌 것 제거

다치 종속 제거

조인 종속성 이용

**도 부 이 결 다 조**



